<!-- art/spiro.html -->

<html>
<head>
    <meta charset="UTF-8">
    <title>kyle pollina | spiro</title>

    <!-- CSS -->
    <link rel="stylesheet" href="../stylesheets/main.css">
    <link rel="stylesheet" href="../stylesheets/styles.css">
    <link rel="stylesheet" href="../stylesheets/pygment_trac.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Teko" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <!-- Scripts -->
    <script src="../scripts/p5/p5.min.js"></script>
    <script language="javascript" type="text/javascript" src="../scripts/p5/addons/p5.dom.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>

    <script src="../scripts/p5-utilities/turtle.js"></script>

    <script src="../scripts/art/spiro.js"></script>

</head>
<body>
<div id="container">

  <div id="nav">
    <div class="nav-main"><a href="https://kylepollina.github.io/">kylepollina.github.io</a></div>
    <div class="nav-lower">
      <a href="https://github.com/kylepollina">github</a>
      |
      <a href="../projects.html">projects</a>
    </div>
  </div>

  <div id="sketch">
    <div id="spiro">

      <div id="spiro-holder"></div>

        <div id="description">
<p style="text-align:center">Change the shape by pressing <code>1</code>, <code>2</code>, or <code>3</code>

    </div>
  </div>

  <div id="blog">

  <hr>

<h2>How it works</h2>
<p>To make this I will start by implementing turlte graphics in p5. Using turtles to draw vectors is intuitive and simple to implement in Javascript. <a href="https://en.wikipedia.org/wiki/Turtle_graphics">You can read the Wikipedia page for more information on how they work</a>. Put simply, a turtle is a single point on the screen with a directional heading in degrees. You can tell the turtle to move forward some length and draw a line as it moves. You can also tell the turtle to turn left or turn right a certain angle. You can keep moving and turning it and moving and turning until you have a nice little image.</p>

<img src="https://upload.wikimedia.org/wikipedia/commons/3/3d/Turtle-animation.gif" ></img>
<br><br>

<p>So let's start by creating a simple turtle class.</p>

<pre class="prettyprint"><code> class Turtle {
     constructor(x, y, heading) {
         this.x = x;
         this.y = y;
         this.heading = heading;     // Heading in degrees
     }
 };
</code></pre>
<p>We have a turtle that has an (x,y) coordinate and a heading. Now we need to be able to make it turn left and right. I'm also going to add a function to manually set the heading.<p>

<pre class="prettyprint"><code> class Turtle {
     constructor(x, y, heading) {
         this.x = x;
         this.y = y;
         this.heading = heading;     // Heading in degrees
     }

     right(angle) {  // Increase heading angle
         this.heading += angle;
     }

     left(angle) {  // Decrease heading angle
         this.heading -= angle;
     }

     setHeading(newHeading) {
         this.heading = newHeading;
     }
 };
</code></pre>


<p>In order to get the turtle to move, we need to first convert our turtle's coordinates from polar to cartesian. We'll have to do some trigonometry for this. Lucky for us, p5 has some handy built-in functions to do the calculations. But first, let's take a look at a unit circle to figure out how we will go about doing this.
</p>

<img src="https://upload.wikimedia.org/wikipedia/commons/8/8f/Unit_circle.svg"></img>
<br><br>

<p>So we know if we have an angle <em>t</em>, we can take the cosine and sine of it to get our new x and y values respectively. These (x,y) coordinates would only be on the unit circle of radius = 1. We'll have to multiply each these values by the scalar length we are moving the turtle. But this angle <em>t</em> is in radians and our heading is in degrees. Good thing for us, p5 has a radians() function to convert from degrees to radians, and sin() and cos() functions to calculate the sine and cosine.</p>


<pre class="prettyprint"><code> class Turtle {
   ...

   forward(length) {
     // (x1,y1) will be the new coordinate
     var x1 = this.x + length * cos(radians(this.heading));
     var y1 = this.y + length * sin(radians(this.heading));

     // draw a line from the current coordinates to the new coordinates 
     line(this.x, this.y, x1, y1);

     // update turtle's position
     this.x = x1;
     this.y = y1;
   }
 }
</code></pre>

<p>Now that we have a turtle, lets work on the spirograph. I always like to break down problems into it's simplest pieces. Let's use our turtle to draw an equilateral triangle. Equilateral triangles have three sides with equal length and an internal angle of 60°. But if you try to get a turtle to (move unit length, turn right 60°) x 3 you will get something like this..</p>
<img src="images/blog/spiro1.png"></img>
<br><br>
<p>We're going to need the turtle to turn <code>(180 - internalAngle)</code> degrees instead to be able to produce the output we want. This should make sense since turning the turtle 180 degrees would reverse the turtle's direction.</p>
<img src="images/blog/spiro2.png"></img>
<br><br>
<p>Cool, we have an enclosed triangle now. But we don't really want an enclosed triangle for the spirograph. So if instead we use an internal angle of 61° we'll get  this output...</p>
<img src="images/blog/spiro3.png"></img>
<br><br>
<p> Now if we draw this same triangle a bunch more times...</p>
<img src="images/blog/spiro4.png"></img>
<br><br>
<p>Alright, neat. Now it looks like our triangle is rotating around a central point. But in order to get that spirograph look, we need to shorten the length of each side at every turn. We can make a function called <br><pre><code>drawLineAndTurn(sideLength, internalAngle) {...}</code></pre>that just draws one line of length <code>sideLength</code> and turns the turtle according to <code>internalAngle</code>.</p>
<p>We can keep the internal angle the same for now, but we'll want to reduce the side length for every step until it's down to zero length. This can be done using a <code>for</code> loop that iterates from zero to some initial side length. We can call <code>drawLineAndTurn()</code> but have <code>sideLength</code> get smaller for each iteration in the for loop. That can look something like this...</p>

<pre class="prettyprint"><code> for(var i = 0; i &lt; initialLength; i++) {
   drawLineAndTurn(initialLength - i, internalAngle); 
 }
</code></pre>

<p>Let's run that and see what we get.</p>
<img src="images/blog/spiro5.png"></img>
<br><br>
<p>
Awesome! Exactly what we wanted, and pretty simple too. Now it's time to experiment! Experimenting is the fun part of programming. Mess around with the colors, or the amount you decrement the side length (maybe depending on the x position of the mouse, ooh!), or the internal angle, or anything. Change everything until you find something cool. Here, I accidentally made this cool little image while writing this post. See if you can figure out how to do it too. Or make something entirely new.
</p>
<img src="images/blog/spiro6.png"></img>
<br><br>

  </div>

  <div id="footer">
    <p>&copy; 2019</p>
  </div>

</div>

</body>
</html>
